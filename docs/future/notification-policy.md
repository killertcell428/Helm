# Notification Policy（設計のみ）

## 概要

エスカレーション・承認・実行完了などのイベントについて、誰に・どのチャネルで・どのタイミングで通知するかをポリシーで定義する。

## 方針

- **ポリシー定義**: イベント種別（escalation_created, approval_required, execution_completed 等）ごとに、通知先（ロールまたはユーザー）、チャネル（メール、Google Chat、Slack 等）、遅延（即時 or バッチ）を設定可能にする。
- **設定の保存**: JSON または DB で `notification_policies` を保持。組織グラフ・RACI と連携し、通知先を「責任者ロール」で指定できるようにする。
- **実行**: イベント発生時に NotificationAgent または専用ワーカーがポリシーを参照し、該当する通知をキューに投入して送信する。
- **抑制**: 同一リソースに対する重複通知の抑制（時間窓内は 1 回のみ等）をポリシーで指定可能にする。

## 将来実装時のポイント

- 既存の NotificationAgent を「ポリシー駆動」に拡張。ポリシーが未設定の場合は現行の固定ロジックにフォールバックする。
- Job Queue と連携し、通知送信自体を非同期ジョブにする。
